================================================================================
                    COLABCANVAS - PROJECT DOCUMENTATION
                    Real-Time Collaborative Whiteboard
================================================================================

TABLE OF CONTENTS
-----------------
1. Project Overview
2. System Architecture
3. Technology Stack
4. Features & Functionality
5. Database Schema
6. Real-Time Communication Flow
7. Authentication & Authorization
8. File Structure
9. API Endpoints
10. Socket Events
11. Wireframing & User Flow
12. Setup Instructions
13. Key Implementation Details

================================================================================
1. PROJECT OVERVIEW
================================================================================

ColabCanvas is a real-time collaborative whiteboard application that allows
multiple users to draw, annotate, and collaborate on a shared canvas in real-time.
Users can create boards, share them with others, and work together seamlessly
with instant synchronization across all connected clients.

Key Highlights:
- Real-time collaboration with Socket.IO
- Anonymous and authenticated access
- Rich drawing tools (pencil, pen, shapes, text)
- Shape manipulation (drag, move, delete)
- Multiple users can edit simultaneously
- Instant synchronization across all connected devices
- Dark/Light theme support
- Board sharing with invite links

================================================================================
2. SYSTEM ARCHITECTURE
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT (React.js)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   UI Components  â”‚  â”‚  Canvas (Konva)  â”‚  â”‚  Socket Client   â”‚  â”‚
â”‚  â”‚  - Navbar        â”‚  â”‚  - Drawing Layer â”‚  â”‚  - Event Emit    â”‚  â”‚
â”‚  â”‚  - Toolbar       â”‚  â”‚  - Shape Layer   â”‚  â”‚  - Event Listen  â”‚  â”‚
â”‚  â”‚  - Modal         â”‚  â”‚  - Grid Layer    â”‚  â”‚  - Reconnection  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                      â”‚                       â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    HTTP REST API â”‚ WebSocket (Socket.IO)
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SERVER (Node.js + Express)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   REST Routes    â”‚  â”‚  Socket Handler  â”‚  â”‚   Middleware     â”‚  â”‚
â”‚  â”‚  - Auth Routes   â”‚  â”‚  - Join Board    â”‚  â”‚  - JWT Auth      â”‚  â”‚
â”‚  â”‚  - Board Routes  â”‚  â”‚  - Drawing Eventsâ”‚  â”‚  - CORS          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  - Shape Events  â”‚  â”‚  - Error Handler â”‚  â”‚
â”‚         â”‚              â”‚  - User Events   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                â”‚                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”‚   MongoDB Database    â”‚                        â”‚
â”‚                    â”‚  - Users Collection   â”‚                        â”‚
â”‚                    â”‚  - Boards Collection  â”‚                        â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Data Flow:
1. User performs action on canvas (draw, move, delete)
2. Client updates local state immediately (optimistic update)
3. Client emits socket event to server
4. Server saves to database with markModified()
5. Server broadcasts to all other connected clients
6. Other clients receive event and update their canvas
7. All users see synchronized state in real-time

================================================================================
3. TECHNOLOGY STACK
================================================================================

FRONTEND:
- React.js 18.x          - UI framework
- Konva.js & React-Konva - Canvas rendering and manipulation
- Socket.IO Client       - Real-time WebSocket communication
- Framer Motion          - Smooth animations and transitions
- Tailwind CSS           - Utility-first CSS framework
- React Router DOM       - Client-side routing
- Axios                  - HTTP client for API calls

BACKEND:
- Node.js 16.x+          - JavaScript runtime
- Express.js             - Web application framework
- Socket.IO              - WebSocket server for real-time events
- MongoDB + Mongoose     - NoSQL database and ODM
- JWT (jsonwebtoken)     - Authentication tokens
- bcryptjs               - Password hashing
- dotenv                 - Environment variable management
- CORS                   - Cross-origin resource sharing

INFRASTRUCTURE:
- MongoDB Atlas          - Cloud database hosting
- Environment Variables  - Configuration management

================================================================================
4. FEATURES & FUNCTIONALITY
================================================================================

4.1 USER MANAGEMENT
-------------------
âœ“ User Registration (Name, Email, Password)
âœ“ User Login with JWT authentication
âœ“ Password encryption with bcrypt
âœ“ Profile management
âœ“ Anonymous access for shared boards

4.2 BOARD MANAGEMENT
--------------------
âœ“ Create new boards
âœ“ List user's boards (My Boards)
âœ“ Delete boards
âœ“ Board metadata (title, description, created date)
âœ“ Board ownership and permissions
âœ“ Generate shareable invite links
âœ“ Anonymous access via invite links

4.3 DRAWING TOOLS
-----------------
âœ“ Pencil Tool       - Freehand drawing
âœ“ Pen Tool          - Smooth pen strokes
âœ“ Highlighter       - Semi-transparent marker
âœ“ Marker            - Bold marker strokes
âœ“ Eraser Tools      - Full & partial eraser
âœ“ Select Tool       - Pan canvas & move shapes

âœ“ Shape Tools:
  - Rectangle       - Standard rectangles
  - Circle          - Perfect circles
  - Ellipse         - Oval shapes
  - Diamond         - Diamond shapes
  - Triangle        - Triangular shapes
  - Star            - Star shapes
  - Hexagon         - Six-sided shapes
  - Arrow           - Directional arrows
  - Line            - Straight lines

âœ“ Text Tool         - Add text annotations

4.4 SHAPE MANIPULATION
----------------------
âœ“ Drag shapes (in SELECT mode only)
âœ“ Move shapes across canvas
âœ“ Delete individual shapes
âœ“ Clear entire board
âœ“ Real-time position updates

4.5 CUSTOMIZATION
-----------------
âœ“ Color picker for strokes/fills
âœ“ Thickness adjustment
âœ“ Opacity control
âœ“ Dark/Light theme toggle
âœ“ Cursor customization per tool

4.6 REAL-TIME COLLABORATION
---------------------------
âœ“ Multiple users on same board
âœ“ Real-time drawing synchronization
âœ“ Shape movement sync
âœ“ User presence indicators
âœ“ Live cursor tracking
âœ“ User join/leave notifications
âœ“ Connected users list
âœ“ Chat functionality

4.7 CANVAS FEATURES
-------------------
âœ“ Grid background for alignment
âœ“ Pan and zoom controls
âœ“ Undo/Redo functionality
âœ“ Export board as image
âœ“ Keyboard shortcuts
âœ“ Auto-save (500ms debounce)

================================================================================
5. DATABASE SCHEMA
================================================================================

5.1 USER COLLECTION
-------------------
{
  _id: ObjectId,
  name: String (required),
  email: String (required, unique, lowercase),
  password: String (required, hashed),
  createdAt: Date (default: now),
  updatedAt: Date
}

Indexes:
- email: unique index for fast lookup

5.2 BOARD COLLECTION
--------------------
{
  _id: ObjectId,
  boardId: String (UUID, unique),           // For sharing
  title: String (required),
  description: String,
  owner: ObjectId (ref: 'User'),
  collaborators: [
    {
      user: ObjectId (ref: 'User'),
      role: String (enum: ['viewer', 'editor', 'admin']),
      joinedAt: Date
    }
  ],
  isPublic: Boolean (default: false),
  allowAnonymous: Boolean (default: true),  // Allow non-logged users
  data: {
    lines: [
      {
        id: String,
        points: [Number],                   // Array of x,y coordinates
        tool: String,
        color: String,
        thickness: Number,
        opacity: Number,
        timestamp: Date
      }
    ],
    rectangles: [
      {
        id: String,
        x: Number,
        y: Number,
        width: Number,
        height: Number,
        type: String,                       // 'rect' or 'diamond'
        color: String,
        thickness: Number,
        fill: String,
        timestamp: Date
      }
    ],
    circles: [
      {
        id: String,
        x: Number,
        y: Number,
        radius: Number,
        radiusX: Number,                    // For ellipse
        radiusY: Number,                    // For ellipse
        type: String,                       // 'circle', 'ellipse', 'star', 'hexagon'
        color: String,
        thickness: Number,
        fill: String,
        timestamp: Date
      }
    ],
    arrows: [
      {
        id: String,
        points: [Number],                   // Start and end points
        type: String,                       // 'arrow', 'line', 'triangle'
        color: String,
        thickness: Number,
        fill: String,
        timestamp: Date
      }
    ],
    textNodes: [
      {
        id: String,
        x: Number,
        y: Number,
        text: String,
        fontSize: Number,
        color: String,
        timestamp: Date
      }
    ]
  },
  createdAt: Date (default: now),
  updatedAt: Date
}

Indexes:
- boardId: unique index
- owner: index for user's boards lookup

Methods:
- hasPermission(userId): Check if user has access
- getInviteUrl(): Generate shareable URL

================================================================================
6. REAL-TIME COMMUNICATION FLOW
================================================================================

6.1 CONNECTION ESTABLISHMENT
----------------------------
Client                          Server
  â”‚                               â”‚
  â”‚  1. Connect with/without JWT  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                               â”‚ 2. Authenticate/Allow Anonymous
  â”‚                               â”‚
  â”‚  3. Connection Confirmed      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                               â”‚
  â”‚  4. Join Board (boardId)      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                               â”‚ 5. Load latest board from DB
  â”‚                               â”‚ 6. Add user to room
  â”‚                               â”‚
  â”‚  7. board-state (full data)   â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                               â”‚
  â”‚  8. user-joined notification  â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (broadcast to others)
  â”‚                               â”‚

6.2 DRAWING OPERATION FLOW
--------------------------
User A (Drawer)                Server                    User B (Viewer)
      â”‚                          â”‚                              â”‚
  1. Draw line                   â”‚                              â”‚
      â”‚                          â”‚                              â”‚
  2. Add to local state          â”‚                              â”‚
      â”‚                          â”‚                              â”‚
  3. emit('line-draw', data)     â”‚                              â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                              â”‚
                                 â”‚ 4. Save to DB (markModified) â”‚
                                 â”‚                              â”‚
                                 â”‚ 5. emit('line-draw', data)   â”‚
                                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
                                 â”‚                          6. Add to state
                                 â”‚                          7. Render line

6.3 SHAPE MOVEMENT FLOW
-----------------------
User A (Mover)                 Server                    User B (Observer)
      â”‚                          â”‚                              â”‚
  1. Drag shape (SELECT mode)    â”‚                              â”‚
      â”‚                          â”‚                              â”‚
  2. Update local position       â”‚                              â”‚
      â”‚                          â”‚                              â”‚
  3. emit('shape-update', data)  â”‚                              â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                              â”‚
                                 â”‚ 4. Find & update in DB       â”‚
                                 â”‚    markModified('data')      â”‚
                                 â”‚                              â”‚
                                 â”‚ 5. emit('shape-update')      â”‚
                                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
                                 â”‚                          6. Update position
                                 â”‚                          7. Re-render

6.4 USER JOIN FLOW
------------------
New User                       Server                    Existing Users
    â”‚                            â”‚                              â”‚
1. Navigate to board URL         â”‚                              â”‚
    â”‚                            â”‚                              â”‚
2. HTTP GET /board/:id           â”‚                              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                              â”‚
                                 â”‚ 3. Verify access/permissions â”‚
                                 â”‚                              â”‚
    â”‚ 4. Board data              â”‚                              â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
    â”‚                            â”‚                              â”‚
5. Connect socket                â”‚                              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                              â”‚
                                 â”‚ 6. Authenticate              â”‚
                                 â”‚                              â”‚
7. emit('join-board', boardId)   â”‚                              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                              â”‚
                                 â”‚ 8. Reload board from DB      â”‚
                                 â”‚ 9. Add to room               â”‚
                                 â”‚                              â”‚
    â”‚ 10. board-state (latest)   â”‚                              â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
                                 â”‚                              â”‚
                                 â”‚ 11. user-joined notification â”‚
                                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
                                 â”‚                          12. Show alert

================================================================================
7. AUTHENTICATION & AUTHORIZATION
================================================================================

7.1 JWT TOKEN STRUCTURE
-----------------------
Header:
{
  "alg": "HS256",
  "typ": "JWT"
}

Payload:
{
  "id": "user_mongodb_id",
  "iat": 1640000000,      // Issued at
  "exp": 1640086400       // Expires at (30 days)
}

Signature:
HMACSHA256(
  base64UrlEncode(header) + "." + base64UrlEncode(payload),
  JWT_SECRET
)

7.2 AUTHENTICATION FLOW
-----------------------
1. User Registration:
   POST /api/auth/register
   - Validate email format
   - Check if user exists
   - Hash password with bcrypt (10 rounds)
   - Create user in database
   - Generate JWT token
   - Return token + user data

2. User Login:
   POST /api/auth/login
   - Validate email & password
   - Compare hashed password
   - Generate JWT token
   - Return token + user data

3. Protected Routes:
   - Extract token from "Authorization: Bearer <token>"
   - Verify token with JWT_SECRET
   - Fetch user from database
   - Attach user to req.user
   - Continue to route handler

4. Socket Authentication:
   - Extract token from handshake
   - Verify token OR allow anonymous
   - Attach user/anonymous to socket.user
   - Allow connection

7.3 AUTHORIZATION LEVELS
------------------------
Board Access Control:
- Owner: Full control (delete, share, edit)
- Editor: Can draw and modify content
- Viewer: Can only view (not implemented in current version)
- Anonymous: Can edit if allowAnonymous = true

Current Implementation:
- Anonymous users can edit when board allows it
- All users with link have edit access
- Only owner can generate new invite links

================================================================================
8. FILE STRUCTURE
================================================================================

ColabCanvas-main/
â”‚
â”œâ”€â”€ client/                          # React frontend
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ index.html              # HTML entry point
â”‚   â”‚
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/             # Reusable UI components
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatPanel.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CursorManager.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ExportModal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ KeyboardShortcutsHelp.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LayerManager.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Logo.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NotificationSystem.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PrivateRoute.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ShapesToolbar.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ShareModal.jsx
â”‚   â”‚   â”‚   â””â”€â”€ WelcomePopup.jsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ contexts/               # React contexts
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthContext.js     # Authentication state
â”‚   â”‚   â”‚   â””â”€â”€ ThemeContext.js    # Dark/Light theme
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ hooks/                  # Custom React hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useCursorBroadcast.js
â”‚   â”‚   â”‚   â”œâ”€â”€ useKeyboardShortcuts.js
â”‚   â”‚   â”‚   â”œâ”€â”€ useLayers.js
â”‚   â”‚   â”‚   â””â”€â”€ useNotifications.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pages/                  # Main page components
â”‚   â”‚   â”‚   â”œâ”€â”€ Board.jsx          # Main whiteboard canvas
â”‚   â”‚   â”‚   â”œâ”€â”€ BoardInvite.jsx    # Shared board access
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx      # User dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.jsx           # Landing page
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx          # Login page
â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.jsx        # User profile
â”‚   â”‚   â”‚   â””â”€â”€ Signup.jsx         # Registration page
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/               # API & Socket services
â”‚   â”‚   â”‚   â”œâ”€â”€ api.js             # Axios configuration
â”‚   â”‚   â”‚   â”œâ”€â”€ boardService.js    # Board API calls
â”‚   â”‚   â”‚   â””â”€â”€ socketService.js   # Socket.IO client
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                  # Utility functions
â”‚   â”‚   â”‚   â”œâ”€â”€ ExportManager.js
â”‚   â”‚   â”‚   â””â”€â”€ motionFallback.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.js                  # Root component
â”‚   â”‚   â”œâ”€â”€ index.js               # Entry point
â”‚   â”‚   â””â”€â”€ index.css              # Global styles
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tailwind.config.js
â”‚
â”œâ”€â”€ server/                          # Node.js backend
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ db.js                   # MongoDB connection
â”‚   â”‚
â”‚   â”œâ”€â”€ controllers/                # Route controllers
â”‚   â”‚   â”œâ”€â”€ authController.js      # Auth logic
â”‚   â”‚   â””â”€â”€ boardController.js     # Board CRUD
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/                 # Express middleware
â”‚   â”‚   â””â”€â”€ authMiddleware.js      # JWT verification
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                     # Mongoose schemas
â”‚   â”‚   â”œâ”€â”€ Board.js               # Board model
â”‚   â”‚   â””â”€â”€ User.js                # User model
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                     # Express routes
â”‚   â”‚   â”œâ”€â”€ authRoutes.js          # Auth endpoints
â”‚   â”‚   â””â”€â”€ boardRoutes.js         # Board endpoints
â”‚   â”‚
â”‚   â”œâ”€â”€ socketHandlers/             # Socket.IO handlers
â”‚   â”‚   â””â”€â”€ whiteboardEvents.js    # Real-time events
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ generateToken.js       # JWT generation
â”‚   â”‚
â”‚   â”œâ”€â”€ server.js                   # Server entry point
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env                        # Environment variables
â”‚
â””â”€â”€ PROJECT_DOCUMENTATION.txt       # This file

================================================================================
9. API ENDPOINTS
================================================================================

9.1 AUTHENTICATION ENDPOINTS
----------------------------
POST /api/auth/register
  Body: { name, email, password }
  Response: { token, user: { id, name, email } }
  Description: Register new user account

POST /api/auth/login
  Body: { email, password }
  Response: { token, user: { id, name, email } }
  Description: Login existing user

GET /api/auth/me
  Headers: Authorization: Bearer <token>
  Response: { id, name, email }
  Description: Get current user profile

9.2 BOARD ENDPOINTS
-------------------
POST /api/boards
  Headers: Authorization: Bearer <token>
  Body: { title, description? }
  Response: { board }
  Description: Create new board

GET /api/boards
  Headers: Authorization: Bearer <token>
  Response: { boards: [] }
  Description: Get all boards owned by user

GET /api/boards/:id
  Headers: Authorization: Bearer <token> (optional)
  Response: { board }
  Description: Get single board by ID or boardId (UUID)

PUT /api/boards/:id
  Headers: Authorization: Bearer <token>
  Body: { title?, description?, data? }
  Response: { board }
  Description: Update board content or metadata

DELETE /api/boards/:id
  Headers: Authorization: Bearer <token>
  Response: { message }
  Description: Delete board (owner only)

POST /api/boards/:id/invite
  Headers: Authorization: Bearer <token>
  Response: { inviteUrl, boardId, settings }
  Description: Generate shareable invite link (owner only)

GET /api/boards/invite/:boardId
  Response: { board }
  Description: Access board via invite link (anonymous allowed)

POST /api/boards/:id/collaborators
  Headers: Authorization: Bearer <token>
  Body: { email, role: 'editor'|'viewer' }
  Response: { board }
  Description: Add collaborator to board

================================================================================
10. SOCKET EVENTS
================================================================================

10.1 CONNECTION EVENTS
----------------------
connect
  Emitted by: Client (automatic)
  Received by: Server
  Description: Socket connection established

disconnect
  Emitted by: Client (automatic)
  Received by: Server
  Payload: { reason }
  Description: Socket connection closed

join-board
  Emitted by: Client
  Payload: boardId (String)
  Description: User wants to join a board room
  Server Response: 
    - 'board-state' with full board data
    - 'users-update' with connected users
  Broadcast: 'user-joined' to other users

leave-board
  Emitted by: Client
  Description: User leaving current board
  Broadcast: 'user-left' to other users

10.2 DRAWING EVENTS
-------------------
line-draw
  Emitted by: Client
  Payload: { id, points: [], tool, color, thickness, opacity }
  Server Action: Save to DB, broadcast to others
  Received by: Other clients

rect-draw
  Emitted by: Client
  Payload: { id, x, y, width, height, type, color, thickness, fill }
  Server Action: Save to DB, broadcast to others
  Received by: Other clients

circle-draw
  Emitted by: Client
  Payload: { id, x, y, radius, type, color, thickness, fill }
  Server Action: Save to DB, broadcast to others
  Received by: Other clients

arrow-draw
  Emitted by: Client
  Payload: { id, points: [], type, color, thickness, fill }
  Server Action: Save to DB, broadcast to others
  Received by: Other clients

text-add
  Emitted by: Client
  Payload: { id, x, y, text, fontSize, color }
  Server Action: Save to DB, broadcast to others
  Received by: Other clients

10.3 MANIPULATION EVENTS
------------------------
shape-update
  Emitted by: Client
  Payload: { shapeType, shapeId, updates: { x, y, ... } }
  Server Action: Update in DB, broadcast to others
  Received by: Other clients
  Description: When user drags/moves a shape

element-delete
  Emitted by: Client
  Payload: { elementType, elementId }
  Server Action: Remove from DB, broadcast to others
  Received by: Other clients
  Description: Delete individual shape

board-clear
  Emitted by: Client
  Payload: (none)
  Server Action: Clear all data in DB, broadcast to all
  Received by: All clients
  Description: Clear entire board

10.4 COLLABORATION EVENTS
-------------------------
cursor-move
  Emitted by: Client
  Payload: { x, y, userName }
  Server Action: Broadcast to others (not saved)
  Received by: Other clients
  Description: Real-time cursor tracking

chat-message
  Emitted by: Client
  Payload: { message }
  Server Action: Broadcast to all (including sender)
  Received by: All clients
  Payload: { id, message, userId, userName, timestamp }

board-state
  Emitted by: Server
  Received by: Client (on join)
  Payload: { board: { lines, rectangles, circles, arrows, textNodes }, users: [] }
  Description: Full board state when joining

user-joined
  Emitted by: Server (broadcast)
  Received by: Other clients
  Payload: { user: { id, name, email } }
  Description: Notification when someone joins

user-left
  Emitted by: Server (broadcast)
  Received by: Other clients
  Payload: { user: { id, name } }
  Description: Notification when someone leaves

users-update
  Emitted by: Server (to all in room)
  Received by: All clients
  Payload: [ { id, name, email, joinedAt }, ... ]
  Description: Updated list of connected users

10.5 UTILITY EVENTS
-------------------
undo
  Emitted by: Client
  Server Action: Broadcast to others (state management on client)
  Received by: Other clients

redo
  Emitted by: Client
  Server Action: Broadcast to others (state management on client)
  Received by: Other clients

error
  Emitted by: Server
  Received by: Client
  Payload: { message }
  Description: Error notification

================================================================================
11. WIREFRAMING & USER FLOW
================================================================================

11.1 HOME PAGE FLOW
-------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              HOME PAGE                      â”‚
â”‚                                             â”‚
â”‚         [ColabCanvas Logo]                  â”‚
â”‚                                             â”‚
â”‚   Real-time Collaborative Whiteboard       â”‚
â”‚                                             â”‚
â”‚   [Get Started] [Login]                    â”‚
â”‚                                             â”‚
â”‚   Features:                                 â”‚
â”‚   âœ“ Real-time collaboration                â”‚
â”‚   âœ“ Rich drawing tools                     â”‚
â”‚   âœ“ Share with anyone                      â”‚
â”‚   âœ“ No installation required               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
    [Get Started]         [Login]
         â”‚                    â”‚
         â–¼                    â–¼
    SIGNUP PAGE          LOGIN PAGE

11.2 AUTHENTICATION FLOW
------------------------
LOGIN PAGE                          SIGNUP PAGE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Login to Canvas  â”‚              â”‚  Create Account   â”‚
â”‚                   â”‚              â”‚                   â”‚
â”‚  Email: [____]    â”‚              â”‚  Name: [_____]    â”‚
â”‚  Password: [___]  â”‚              â”‚  Email: [____]    â”‚
â”‚                   â”‚              â”‚  Password: [___]  â”‚
â”‚  [Login]          â”‚              â”‚                   â”‚
â”‚                   â”‚              â”‚  [Sign Up]        â”‚
â”‚  New user? Signup â”‚              â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  Have account?    â”‚
         â”‚                         â”‚  Login            â”‚
         â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                   JWT Token
                        â”‚
                        â–¼
                  DASHBOARD

11.3 DASHBOARD LAYOUT
---------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] ColabCanvas         [Profile] [Theme] [Logout]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  My Boards                              [+ Create New Board] â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Board 1    â”‚  â”‚   Board 2    â”‚  â”‚   Board 3    â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â”‚  "Meeting    â”‚  â”‚  "Project    â”‚  â”‚  "Brainstorm â”‚       â”‚
â”‚  â”‚   Notes"     â”‚  â”‚   Planning"  â”‚  â”‚   Session"   â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â”‚  [Open]      â”‚  â”‚  [Open]      â”‚  â”‚  [Open]      â”‚       â”‚
â”‚  â”‚  [Delete]    â”‚  â”‚  [Delete]    â”‚  â”‚  [Delete]    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    [+ Create] or [Open]
         â”‚
         â–¼
    BOARD CANVAS

11.4 BOARD CANVAS LAYOUT
------------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] Board Title          [Save] [Share] [Export] [âš™]     â”‚
â”œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚T â”‚                                                            â”‚
â”‚O â”‚                  CANVAS AREA                              â”‚
â”‚O â”‚                                                            â”‚
â”‚L â”‚  â€¢ Drawing with selected tool                             â”‚
â”‚B â”‚  â€¢ Grid background                                        â”‚
â”‚A â”‚  â€¢ Shapes, lines, text                                    â”‚
â”‚R â”‚  â€¢ Zoom & Pan controls                                    â”‚
â”‚  â”‚  â€¢ Multi-user cursors                                     â”‚
â”‚ğŸ“Œâ”‚                                                            â”‚
â”‚âœï¸â”‚                                                            â”‚
â”‚ğŸ”²â”‚                                                            â”‚
â”‚â­•â”‚                                                            â”‚
â”‚â¡ï¸â”‚                                                            â”‚
â”‚T â”‚                                                            â”‚
â”‚ğŸ¨â”‚                                                            â”‚
â”‚ğŸ“â”‚                                                            â”‚
â”‚ğŸ§¹â”‚                                                            â”‚
â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TOOLBAR BREAKDOWN:
------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SELECT (V)    â”‚ â† Pan canvas & move shapes
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PEN TOOLS     â”‚
â”‚  â€¢ Pencil      â”‚
â”‚  â€¢ Pen         â”‚
â”‚  â€¢ Highlighter â”‚
â”‚  â€¢ Marker      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SHAPES        â”‚
â”‚  â€¢ Rectangle   â”‚
â”‚  â€¢ Circle      â”‚
â”‚  â€¢ Triangle    â”‚
â”‚  â€¢ Diamond     â”‚
â”‚  â€¢ Arrow       â”‚
â”‚  â€¢ Star        â”‚
â”‚  â€¢ Hexagon     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TEXT (T)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  COLOR         â”‚
â”‚  [ğŸ¨]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  THICKNESS     â”‚
â”‚  [â”â”â”]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ERASER        â”‚
â”‚  â€¢ Full        â”‚
â”‚  â€¢ Partial     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

11.5 SHARING FLOW
-----------------
User clicks [Share] button
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Share Board Modal          â”‚
â”‚                                 â”‚
â”‚  Invite Link:                   â”‚
â”‚  [https://app.../board/uuid]    â”‚
â”‚                     [Copy] ğŸ“‹   â”‚
â”‚                                 â”‚
â”‚  Anyone with this link can      â”‚
â”‚  edit the board                 â”‚
â”‚                                 â”‚
â”‚  [Update Link]  [Close]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    User copies link
         â”‚
         â–¼
    Shares via email/chat
         â”‚
         â–¼
    Recipient opens link
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Opens board as  â”‚
    â”‚  anonymous or    â”‚
    â”‚  logged-in user  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

11.6 REAL-TIME COLLABORATION VIEW
---------------------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Meeting Notes Board    [Save: âœ“] [ğŸ‘¤ 3 users online]        â”‚
â”œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚T â”‚                                                            â”‚
â”‚O â”‚    ğŸ‘† User A (drawing)                                    â”‚
â”‚O â”‚        âœï¸ â”€â”€â”€â”€â”€                                           â”‚
â”‚L â”‚                                                            â”‚
â”‚  â”‚                                                            â”‚
â”‚  â”‚                    ğŸ“ User B's text                       â”‚
â”‚  â”‚                                                            â”‚
â”‚  â”‚                                      ğŸ‘† User C            â”‚
â”‚  â”‚                                         (selecting)       â”‚
â”‚  â”‚                                                            â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚    â”‚ Rectangle  â”‚ â† Just drawn by User A                 â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚  â”‚                                                            â”‚
â”‚  â”‚  â­• Circle â† User C is dragging this                     â”‚
â”‚  â”‚                                                            â”‚
â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CONNECTED USERS INDICATOR:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¥ 3 Users Online   â”‚
â”‚                     â”‚
â”‚ â€¢ User A (You)      â”‚
â”‚ â€¢ User B            â”‚
â”‚ â€¢ User C            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

11.7 TOOL MODE SWITCHING
------------------------
DRAW MODE (Default):
- Any drawing tool selected (pencil, pen, shapes)
- Cursor: crosshair
- Mouse drag: Creates new shapes
- Existing shapes: NOT draggable
- Purpose: Add new content

SELECT MODE:
- Select tool active
- Cursor: grab hand
- Mouse drag on empty space: Pan canvas
- Mouse drag on shape: Move shape
- Existing shapes: Draggable
- Purpose: Manipulate existing content

Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Drawing Mode â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ User clicks SELECT tool
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Select Mode  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ User clicks any drawing tool
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Drawing Mode â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
12. SETUP INSTRUCTIONS
================================================================================

12.1 PREREQUISITES
------------------
- Node.js (v16 or higher)
- MongoDB (local or Atlas account)
- npm or yarn package manager
- Code editor (VS Code recommended)

12.2 INSTALLATION STEPS
-----------------------
1. Clone or extract the project
   
2. Setup Backend:
   cd server
   npm install
   
   Create .env file:
   PORT=5000
   MONGO_URI=your_mongodb_connection_string
   JWT_SECRET=your_secret_key_here
   
   Start server:
   npm start
   
   Server runs on: http://localhost:5000

3. Setup Frontend:
   cd client
   npm install
   
   Create .env file (optional):
   REACT_APP_BACKEND_URL=http://localhost:5000
   
   Start client:
   npm start
   
   Client runs on: http://localhost:3000

12.3 ENVIRONMENT VARIABLES
--------------------------
SERVER (.env):
- PORT: Server port (default: 5000)
- MONGO_URI: MongoDB connection string
- JWT_SECRET: Secret key for JWT signing

CLIENT (.env):
- REACT_APP_BACKEND_URL: Backend API URL

12.4 DATABASE SETUP
-------------------
1. Create MongoDB Atlas account (free tier)
2. Create new cluster
3. Create database user with password
4. Whitelist your IP or allow from anywhere (0.0.0.0/0)
5. Get connection string
6. Replace <password> in connection string
7. Add to server/.env as MONGO_URI

12.5 RUNNING IN PRODUCTION
--------------------------
Build frontend:
  cd client
  npm run build
  
Deploy backend:
  - Use services like Heroku, Railway, or Render
  - Set environment variables in platform
  - Deploy server code
  
Deploy frontend:
  - Use Vercel, Netlify, or similar
  - Point to build folder
  - Set REACT_APP_BACKEND_URL to production API

================================================================================
13. KEY IMPLEMENTATION DETAILS
================================================================================

13.1 REAL-TIME SYNCHRONIZATION
------------------------------
Problem: How to keep all users in sync without delays or conflicts?

Solution:
1. Optimistic Updates: Client updates local state immediately
2. Socket Emit: Send change to server asynchronously
3. Database Save: Server persists to MongoDB with markModified()
4. Broadcast: Server sends to all other connected clients
5. State Update: Other clients apply change to their state
6. Duplicate Prevention: Check for existing IDs before adding

Result: Sub-100ms synchronization with no conflicts

13.2 MONGOOSE NESTED DOCUMENT UPDATES
-------------------------------------
Problem: MongoDB doesn't detect changes in nested objects

Solution:
  board.data.lines.push(newLine);
  board.markModified('data');  // Tell Mongoose to save
  await board.save();

Without markModified(), changes to board.data would not persist.

13.3 ANONYMOUS USER SUPPORT
---------------------------
Problem: Allow non-logged users to collaborate

Solution:
1. Modified socketAuth middleware to allow connections without token
2. Create anonymous user object: { _id: 'anonymous', name: 'Anonymous User' }
3. Check allowAnonymous flag on boards
4. Skip JWT verification for anonymous users

13.4 SHAPE DRAGGING IN SELECT MODE
----------------------------------
Problem: Shapes interfering with drawing

Solution:
1. Add tool state tracking
2. Set draggable={tool === TOOL_SELECT} on all shapes
3. When drawing tools active: shapes not draggable
4. When select tool active: shapes become draggable
5. Different cursor per mode (crosshair vs grab)

13.5 DATABASE QUERY OPTIMIZATION
--------------------------------
- Use indexes on frequently queried fields (boardId, email)
- Lean queries where full documents not needed
- Populate only required fields for collaborators
- Batch socket emissions to reduce network calls

13.6 ERROR HANDLING
-------------------
- Try-catch blocks in all async operations
- Socket error events for connection issues
- HTTP error responses with meaningful messages
- Client-side error boundaries (to be implemented)
- Logging for debugging

13.7 SECURITY MEASURES
---------------------
- Password hashing with bcrypt (10 rounds)
- JWT expiration (30 days)
- CORS configuration
- Input validation (to be enhanced)
- SQL injection prevention (NoSQL by default)
- XSS prevention (React escapes by default)

================================================================================
FUTURE ENHANCEMENTS
================================================================================

Planned Features:
- [ ] Video/Audio chat integration
- [ ] Advanced shape transforms (rotate, scale)
- [ ] Layers and grouping
- [ ] Templates and assets library
- [ ] Version history and time travel
- [ ] Offline mode with sync
- [ ] Mobile app (React Native)
- [ ] Real-time voice commands
- [ ] AI-powered shape recognition
- [ ] Export to PDF, SVG, PNG
- [ ] Board templates
- [ ] Permission granularity (view-only users)
- [ ] Board search and filtering
- [ ] Presentation mode
- [ ] Sticky notes component
- [ ] Screen sharing integration

Technical Improvements:
- [ ] Redis for session management
- [ ] WebRTC for peer-to-peer
- [ ] Service workers for PWA
- [ ] TypeScript migration
- [ ] Unit and E2E tests
- [ ] Performance monitoring
- [ ] CDN for static assets
- [ ] Load balancing for socket servers

================================================================================
END OF DOCUMENTATION
================================================================================

For questions or support, please contact the development team.
Last Updated: December 21, 2025
Version: 1.0.0
